# extended-mind

**Канонический граф знаний и источник истины для всей системы.**

---

## Что это

extended-mind — это **ядро системы**, задающее канон:
- **Universe Graph** — граф понятий и связей (онтология)
- **3S контент** — Story/System/Service для каждого узла
- **Спецификация формата** — правила структуры и валидации

> Всё, что существует в системе, существует как узел или связь в Universe Graph.

---

## Архитектура

```
┌─────────────────────────────────────────────────────────────────┐
│                    extended-mind (здесь)                        │
│                         Онтология + Сценография                 │
│                                                                 │
│   editor.html  →  universe.json  →  dream-graph (рендер)       │
│                         ↓                                       │
│                   Godot (опционально, для режиссуры)            │
└─────────────────────────────────────────────────────────────────┘
```

**Подробнее:** [docs/ARCHITECTURE.md](./docs/ARCHITECTURE.md)

---

## Быстрый старт

### 1. Редактор графа

Открыть в браузере:
```
R:\contracts\contracts\public\graph\editor.html
```

Или через dream-graph dev server:
```
http://localhost:5173/dream-graph/contracts/public/graph/editor.html
```

### 2. Редактирование

- **+ Node** — добавить узел
- **+ Edge** — соединить узлы
- **Клик на узел** — редактировать Story/System/Service
- **Save JSON** — сохранить граф

### 3. Результат

Файл `universe.json` кладётся в:
```
contracts/public/graph/universe.json
```

dream-graph автоматически подхватывает изменения (кнопка Reload).

---

## Структура данных

### universe.json

```json
{
  "meta": { "version": "1.0" },
  "nodes": [
    {
      "id": "universe",
      "label": "Universe",
      "story": "Нарративный контент",
      "system": "Техническое описание",
      "service": "Действия и возможности",
      "position": { "x": 400, "y": 300 },
      "type": "concept",
      "visibility": "public",
      "status": "expandable"
    }
  ],
  "edges": [
    { "id": "e1", "source": "universe", "target": "concept-a" }
  ]
}
```

---

## Принципы

### 1. Единый источник истины

`universe.json` — единственное место, где определяются:
- Узлы (понятия, объекты)
- Связи (отношения)
- Контент (3S)

### 2. Независимость рендеров

dream-graph, Godot и любые будущие интерфейсы читают `universe.json` напрямую, без промежуточных этапов.

### 3. Эволюционность

**Сейчас:** ручное редактирование  
**Потом:** RAG + LLM автоматизация

Godot — это "строительные леса". Когда паттерны UI-сценографии найдены, он убирается из цепочки.

---

## Перспективы

- [ ] RAG-индексация графа для семантического поиска
- [ ] LLM-генерация 3S контента
- [ ] Автоматическая валидация связности
- [ ] Система понимает и структуру, и сценографию

---

## Структура репозитория

```
extended-mind/
├── docs/
│   ├── ARCHITECTURE.md         # Архитектура системы
│   ├── UNIVERSE_GRAPH_SPEC.md  # Спецификация universe.json
│   ├── ROADMAP.md              # План развития
│   ├── index.md                # Оглавление
│   └── _archive/               # Архив прежних попыток
├── spaces/
│   └── extended-mind-console/  # Редактор (будет переписан)
└── README.md                   # Этот файл
```

**Актуальный редактор:** `contracts/public/graph/editor.html`

## Документация

Главные входы:
- `docs/ARCHITECTURE.md`
- `docs/UNIVERSE_GRAPH_SPEC.md`
- `docs/ROADMAP.md`
- `docs/index.md`

Старая документация сохранена в `docs/_archive/`.

---

## Связанные репозитории

| Репозиторий | Роль |
|-------------|------|
| **contracts** | Хранилище universe.json и ассетов |
| **dream-graph** | Финальный рендер для пользователя |
| **godot-sandbox** | Режиссура (опционально) |
| **utemix-lab** | Координация экосистемы |

---

## Лицензия

MIT License
