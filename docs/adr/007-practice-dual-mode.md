# ADR-007: Двойной режим Practices (структурный + нарративный)

**Статус:** Принято  
**Дата:** 2026-01-27

---

## Signature

- [x] **practice-first** — приоритет практик над таксономиями
- [x] **perception-ontology-split** — разделение восприятия и онтологии

---

## Контекст

Practice существует в системе одновременно как:
1. Способ действия (для пользователя)
2. Траектория становления (для автора/системы)

Возникает риск смешения: использовать story-nodes для навигации по Practices или наоборот.

## Решение

**Practice существует в двух независимых режимах:**

### Структурный режим (для пользователя)

Practice как **способ действия**, привязанный к доменам и персонажам.

| Что видит пользователь | Источник |
|------------------------|----------|
| Описание практики | universe.json: story/system/service |
| Связанные домены | edges: practice → domain |
| Связанные персонажи | edges: character → practice |

**Никаких story-nodes в этом режиме.**

### Нарративный режим (для системы)

Practice как **траектория**, проявляющаяся через story-nodes.

| Что делает система | Источник |
|--------------------|----------|
| Собирает story-nodes | story-node.related_practices |
| Строит временную линию | story-node даты |
| Генерирует контент | TG-генератор, портфолио |

**Practice не "знает" своих story-nodes.**

## Модель связей

```
      Domains ───────┐
                     │
      Characters ──── Practice ──── (future constructs)
                     │
      (independent)  │
                     │
               Story-nodes
             (narrative only)
```

## Правила

### Для структурных связей (обязательные)

- `practice ↔ domain` (relates)
- `practice ↔ character` (relates)
- `practice ↔ practice` (редко, relates)

### Для нарративных связей (опциональные)

- story-node содержит `related_practices: [...]`
- Practice **не содержит** обратных ссылок на story-nodes

### Защитное правило

> ❗ Никогда не использовать story-nodes для определения структуры Practices.  
> ❗ Никогда не выводить story-nodes в пользовательском чтении Practices.

## Последствия

**Положительные:**
- Practice не становится заложником истории
- Пользователь не становится заложником авторского пути
- Один Practice: для автора — путь во времени, для пользователя — карта возможностей

**Отрицательные:**
- Нужна дисциплина: не смешивать режимы
- LLM/агенты должны явно знать, в каком режиме работают

---

## Ключевая формула

> Practice — самостоятельная структурная сущность,  
> связанная с доменами и персонажами напрямую.  
> Story-nodes — нарративный слой,  
> используемый для ретроспектив и генерации контента,  
> но не для пользовательской навигации по Practices.
