# ADR-003: Визуальные проекции (виджеты)

**Статус:** Принято  
**Дата:** 2026-01-26

---

## Signature

- [x] **perception-ontology-split** — разделение восприятия и онтологии

---

## Контекст

Система нуждается во втором способе навигации — через визуальные якоря, не только через граф. Возникает вопрос: являются ли виджеты новыми сущностями канона?

## Решение

**Widget = visual projection of a node, not a canonical entity.**

### Что виджет НЕ является

- ❌ не узел universe.json
- ❌ не новый type
- ❌ не часть канона
- ❌ не объект для RAG

### Что виджет ЕСТЬ

- ✅ визуально-интерактивный якорь узла
- ✅ определяется в контрактном слое (contracts/)
- ✅ существует только в контексте сцены/панели
- ✅ может иметь разное поведение в разных режимах

## Архитектура

```
universe.json      — сущности и связи (канон)
contracts/ui/      — проекции (layout / widgets / bindings)
dream-graph        — рендер
```

Виджеты реализуются исключительно через **contracts + renderer**.

## Последствия

- Канон остаётся чистым (только знания и связи)
- Визуальный слой масштабируется независимо
- Можно иметь разные виджеты для одного узла в разных контекстах
- Основа для будущей "режиссуры интерфейса"

## Visual Anchors v1

Первый тест: 8 доменных виджетов (ч/б иконки) в Story-панели.

---

## Ключевое правило

> Виджеты — это сцена, не онтология.
