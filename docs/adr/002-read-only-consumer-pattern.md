# ADR-002: Паттерн read-only consumer

**Статус:** Принято  
**Дата:** 2026-01-26

---

## Контекст

Система начинает производить артефакты для внешнего мира (TG-посты, отчёты, сценарии). Нужен паттерн взаимодействия этих модулей с каноном.

## Решение

Ввести паттерн **read-only consumer**:

```
canon (universe.json / story-nodes / contracts)
        ↓ читает (GET, не POST)
    [consumer-модуль]
        ↓ трансформирует
    артефакт (пост, сценарий, отчёт)
        ↓ ссылается на
    рендер (Pages URL)
```

### Правила паттерна

1. **Read-only** — модуль не изменяет канон
2. **Ссылается на рендер** — артефакт содержит URL системы
3. **Трансформация, не генерация** — модуль форматирует существующие данные
4. **Источник явный** — артефакт указывает, откуда взяты данные

### Первый прототип

`telegram-content` — генератор постов из story-nodes:
- Читает story-nodes из GitHub
- Форматирует в TG-пост
- Добавляет ссылку на Pages
- Не изменяет канон

## Последствия

- Модули безопасны (не могут сломать канон)
- Артефакты всегда актуальны (читают свежие данные)
- Система распространяется через артефакты, оставаясь единой

## Будущие consumer-модули

- Генератор видео-сценариев
- RAG-модуль для Q&A
- Экспортёр в Notion/Obsidian
- Автоматический changelog
- Генератор документации

---

## Связь с ADR-001

ADR-001 (избежать ловушки таксономий) говорит о структуре графа.
ADR-002 говорит о том, как внешние модули потребляют эту структуру.

Вместе они определяют: **граф растёт связями, а не глубиной; модули читают, но не пишут**.
