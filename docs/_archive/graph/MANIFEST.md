# MANIFEST.md — Canon / Route / Session

> Инварианты экосистемы extended-mind

---

## 1. Канон мал

**Universe Graph** содержит только онтологические и архитектурные сущности:
- Projects
- Repositories  
- Concepts
- Principles
- Decisions
- Roles

**Никакие эпизоды, дайджесты, маршруты и UI-представления не являются частью канона по умолчанию.**

---

## 2. Маршрут ≠ подграф канона

**Route Graph** — это конечный игровой/познавательный маршрут, который **ссылается** на канон через `refs`, но **не является его частью**.

```
Universe Graph (канон)     Route Graph (маршрут)
      ●───●───●                  ○→○→○
      │   │   │                  │   │
      ●───●───●                  ○←──┘
          ↑                      │
          └──────── refs ────────┘
```

---

## 3. Derived ≠ Entity

Всё, что сгенерировано (эпизоды, дайджесты, сессии), считается **derived-артефактом**, пока явно не опубликовано (`Publish`).

| Тип | Статус |
|-----|--------|
| Project, Concept, Decision | **Entity** (часть канона) |
| Episode, Digest, Session | **Derived** (не канон) |
| Route Graph | **Derived** → **Entity** после Publish |

---

## 4. 3S — это линзы, не сущности

**Story / System / Service** — это режимы чтения и редактирования одного и того же маршрута, а не узлы предметного мира.

```
         RouteNode (Step)
              │
    ┌─────────┼─────────┐
    ▼         ▼         ▼
  Story    System    Service
  (что)    (как)     (делать)
```

- **Story** — нарратив, персонажи, контент
- **System** — архитектура, ADR, спецификации
- **Service** — демо-действия, экспорт, сравнение

---

## 5. Конечность обязательна

Любой Route Graph и Session обязаны иметь **проверяемые пределы**:
- `max_nodes`
- `max_edges`
- `max_depth`

**Бесконечен только Universe Graph как карта мира, но не конкретное прохождение.**

---

## 6. Экосистема едина по законам

`vovaipetrova-core` и вся экосистема подчиняются одним инвариантам; разница лишь в масштабе и роли:

| Проект | Роль |
|--------|------|
| extended-mind | Карта мира + редактор маршрутов |
| vovaipetrova-core | Витрина/портал (read-only) |
| dream-graph | Рендерер визуализаций |

---

## 7. Витрина не диктует канон

Проекты могут **демонстрировать** экосистему, но не являются **источником истины** для неё.

Источник истины: **Universe Graph** в extended-mind.

---

## Глобальная цель

> Мы строим систему, где **архитектура = контент**.

- **Universe Graph** описывает устройство экосистемы как карту мира
- **Route Graph** описывает конечные маршруты прохождения этой карты
- **extended-mind** — авторский инструмент для ручной сборки маршрутов
- **vovaipetrova-core** — витрина, которая читает маршруты и демонстрирует экосистему

**Ключевая цель:** мгновенное интуитивное понимание системы через маршрут, без перегрузки и без разрастания канона.
