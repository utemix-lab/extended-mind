# AGENT PLAYBOOK (LLM / IDE)

Короткие рекомендации для кодеров, которые подключаются к системе на сменной основе.
Это не жёсткие правила, а рабочий каркас.

---

## 1. Модель совместной работы

- Есть внешний нарративный партнёр (без доступа к репо), с которым обсуждаются общие вопросы.
- IDE-агент переводит концепции в реалии репозиториев и объясняет компромиссы.
- Человек корректирует курс и запрашивает объяснения по ходу.
- Существенные сдвиги фиксируются в story-nodes.
- Публикация в новости/Telegram — по команде автора, с рекомендацией агента при необходимости.

---

## 2. Что считать существенным сдвигом

Рекомендуемые признаки:
- Добавлены новые узлы/типы в канон.
- Изменены принципы взаимодействия/сценографии.
- Зафиксирован новый паттерн (ADR/спек/правило).
- Появился устойчивый UX-приём, который станет повторяемым.

Если сомневаешься — предложи story-node, но не создавай автоматически.

---

## 3. Быстрый старт (минимум чтения)

1. `MACHINE_CONTEXT.md` — контракт агента
2. `docs/SINGLE-SOURCE-PLAYBOOK.md` — общий замысел
3. Последний checkpoint в `docs/checkpoints/`
4. Канон: `contracts/public/graph/universe.json`
5. Narrative: `docs/narrative/NARRATIVE_LAYER.md`
6. Шаблон story-node: `docs/narrative/templates/story-node.md`
7. UI правила: `contracts/public/ui/INTERACTION_RULES.md`, `SCENOGRAPHY_RULES.md`

---

## 4. Поток действий (рекомендованный)

1. Понять задачу от внешнего партнёра.
2. Проверить соответствие фазе системы и замороженным зонам.
3. Сопоставить с каноном и контрактами.
4. Предложить адаптацию — не исполнять буквально.
5. После изменений оценить, нужен ли story-node.

---

## 5. Публикация новостей

- Генератор постов работает по story-nodes.
- Рекомендация агента — допустима.
- Итоговое решение о публикации — за автором.

---

## 6. Синхронизация и деплой

Контракты → рендер (Pages):
```
dream-graph\scripts\sync-contracts.ps1
```

HF Space (генератор):
```
extended-mind\scripts\sync-hf-space.ps1
```

После синка — commit/push в соответствующие репозитории.
