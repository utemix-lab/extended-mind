# Checkpoint 2026-01-25

> Большая уборка, фиксация замысла, расширение System Graph.

---

## Статус системы

| Компонент | Состояние | Заметки |
|-----------|-----------|---------|
| **universe.json** | ✅ Работает | 11 узлов, 19 рёбер |
| **dream-graph** | ✅ Работает | Витрина (visitor.html) + лаборатория (index.html) |
| **extended-mind** | ✅ Очищен | Playbook + checkpoints |
| **contracts** | ✅ Очищен | Канон + ассеты |
| **godot-sandbox** | ⏸️ Не используется | Добавлен как модуль в канон |

---

## Что сделано

### Сессия 1: Уборка

**extended-mind:**
- Удалены: `cosmos/`, `graph/`, `scripts/`, `tools/`, `spaces/`, `examples/`
- Удалены: `AGENTS.md`, `VISION.md`
- В архив: `repository-structure.md`, `_index.json`

**contracts:**
- Удалены: `exports/`, `routes/demo/`

**dream-graph:**
- Удалены: `ecosystem/`

### Сессия 2: Документация

- Создан `SINGLE-SOURCE-PLAYBOOK.md` — полный замысел системы
- Включено дополнение про 3S-окна как театральную песочницу
- Создана практика checkpoints

### Сессия 3: Расширение System Graph (Слой A)

**Добавлены узлы:**
- `spec-universe-graph` — спецификация формата канона
- `spec-contracts-public` — спецификация структуры contracts
- `module-godot-sandbox` — Godot как опциональный модуль

**Обновлены узлы:**
- `process-edit-to-render` — уточнён пайплайн (выбор узла → 3S → сценография)
- `policy-ssot` — уточнено "рендеры read-only"
- `module-contracts` — уточнено "хранит канон"

**Добавлены рёбра:**
- `edge-universe-system` — связь Universe → System
- `edge-system-contains-godot` — Godot в System Graph
- `edge-system-contains-spec-*` — спецификации в System Graph
- `edge-spec-*-describes-*` — specs описывают модули
- `edge-policy-relates-godot` — политика распространяется на Godot

### GitHub

- Смержены PR во всех 4 репозиториях
- Ветки синхронизированы с main

---

## Текущая структура System Graph (11 узлов)

```
universe (root)
└── system (root)
    └── system-graph (hub)
        ├── module-extended-mind ← spec-universe-graph
        ├── module-dream-graph
        ├── module-contracts ← spec-contracts-public
        ├── module-godot-sandbox
        ├── policy-ssot
        ├── process-edit-to-render
        ├── spec-universe-graph
        └── spec-contracts-public
```

---

## Проблемы / Долги

- [ ] Validator (CLI self-check канона) — после ~20 узлов
- [ ] Content refs — после ~30 узлов
- [ ] Слой B (Characters Hub) — следующий шаг
- [ ] Слой C (Knowledge Domains) — после B

---

## Следующий шаг

**Слой B: Characters Hub**
- Добавить hub для персонажей
- Добавить 2-3 персонажа (Вова, Петрова)
- Определить тип связей персонаж ↔ система

---

## Контекст для агента

При начале работы:

1. `docs/SINGLE-SOURCE-PLAYBOOK.md` — замысел
2. Этот checkpoint — текущее состояние
3. `contracts/public/graph/universe.json` — канон (11 узлов)
4. Витрина: `dream-graph/visitor.html`
5. Редактор: `contracts/public/graph/editor.html`
