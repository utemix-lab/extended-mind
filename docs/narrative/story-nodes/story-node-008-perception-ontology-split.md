# story-node-008-perception-ontology-split

## Название

Разделение смысла и восприятия как архитектурный принцип

## Что произошло

Зафиксирован ключевой архитектурный принцип: канон хранит смысл и связи, контракты и рендеры — восприятие. Правило согласованности проекций (hover, подсветка, фокус) живёт в contracts и ADR, не в universe.json.

## Почему это было необходимо

При реализации симметричной подсветки виджетов и узлов возник соблазн записать правила взаимодействия в канон. Это нарушило бы принцип: RAG индексирует смысл, не сцену и код. Канон должен быть валиден без интерфейса.

## Принятое решение

Трёхуровневая фиксация:
- **ADR-004** — почему принято решение
- **policy-projection-coherence** в universe.json — что правило существует
- **contracts/ui/** — как именно реализовано

Формула: "Система знает, что у неё есть образы. Она знает, что они должны быть согласованы. Но она не знает, как именно они нарисованы."

## Что изменилось в системе

– Создан ADR-004 (согласованность проекций)
– Добавлен policy-projection-coherence в System Graph
– Обновлён contracts/ui/INTERACTION_RULES.md (теперь явно помечен как реализация)
– Зафиксирован signature маркер: perception-ontology-split

## Открытый вопрос

Как новые рендеры (Godot, другие) узнают о необходимости реализовать согласованность проекций? Достаточно ли ADR, или нужен onboarding-документ для разработчиков?

## Что это закладывает

Фундамент для смены рендеров без потери архитектуры. Dream-graph может быть заменён, правила взаимодействия могут эволюционировать, но инвариант "проекции одного узла согласованы" останется. Система сможет объяснить свою архитектуру любому будущему агенту.

---

## Narrative

**evidence:**
- universe.json: `policy-projection-coherence`
- ADR-004: "Система знает, что у неё есть образы..."
- contracts/ui/INTERACTION_RULES.md (помечен как реализация)

**moment:**
Формула родилась из сопротивления соблазну записать hover-логику в канон. Граница стала видимой: смысл — слева, сцена — справа.

**voice_hint:**
- narrator: author
- tone: cinematic

---

**Related Practices:**
- `practice-direction`

**Refs:**
- universe.json: `policy-projection-coherence`
- ADR: ADR-004
- checkpoint: 2026-01-27
