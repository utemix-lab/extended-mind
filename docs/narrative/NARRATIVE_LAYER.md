# Narrative Layer

## Назначение

Story-nodes используются как атомы эволюции системы. В будущем LLM будет работать только с ними и связанными ADR, без живого контекста автора.

**Narrative-поля** добавляют "сцену и голос", не ломая архитектуру.

---

## Структура story-node

### Обязательные поля (6 критериев зрелости)

| Поле | Вопрос |
|------|--------|
| Название | Как это называется по-человечески? |
| Что произошло | Что реально изменилось? |
| Почему это было необходимо | Какой тупик это сняло? |
| Принятое решение | Одно решение, без ветвлений? |
| Что изменилось в системе | Что теперь по-другому? |
| Открытый вопрос | Что пока неясно? |
| Что это закладывает | Какая перспектива? |

### Опциональные поля (Narrative)

| Поле | Назначение |
|------|------------|
| `evidence` | 1–3 якоря реальности: node id, PR/commit, URL, скрин |
| `moment` | Одно предложение микросцены — "что стало видно/чувствоваться" |
| `voice_hint` | Подсказка рассказчика и тона |

---

## voice_hint

### narrator
- `author` — от первого лица, личный опыт
- `system` — от лица системы, нейтрально
- `petrova` — голос Петровы (брендинг, визуал)
- `vova` — голос Вовы (архитектура, код)
- `neutral` — безличный рассказчик

### tone
- `technical` — сухой, точный, для документации
- `essay` — размышление, для блога/статьи
- `diary` — интимный, для личного нарратива
- `cinematic` — образный, для художественного текста

---

## Использование LLM

LLM может собирать из story-nodes:

| Жанр | Что использует |
|------|----------------|
| Структурный отчёт | обязательные поля + evidence |
| Архитектурное эссе | все поля + voice_hint: essay |
| Публичный пост | Название + Что произошло + moment |
| Художественный сюжет | moment + voice_hint: cinematic |

---

## Ключевое правило

> Story-nodes остаются атомарными и каузальными.  
> Narrative-поля добавляют сцену и голос, не ломая архитектуру.

Отсутствие narrative-полей допустимо — LLM работает и без них.
